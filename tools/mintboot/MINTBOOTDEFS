ifeq ($(mintboot),generic)
TARGET = ../libmintboot-generic.a
CPU = 000
COBJS = \
	portable/mb_portable.c \
	portable/mb_cookie.c \
	portable/mb_traps.c \
	portable/mb_log.c \
	portable/mb_coverage.c \
	portable/fs_fat/mb_fat_core.c \
	portable/fs_fat/mb_fat_dir.c \
	portable/fs_fat/mb_fat_file.c \
	portable/fs_fat/mb_fat_check.c \
	portable/mb_kernel.c \
	portable/mb_lib.c \
	portable/mb_util.c \
	tests/fs_fat/mb_fat_tests.c \
	tests/fs_fat/mb_fat_test_support.c \
	tests/fs_fat/mb_fat_test_lookup.c \
	tests/fs_fat/mb_fat_test_rename.c \
	tests/fs_fat/mb_fat_test_dir.c \
	tests/fs_fat/mb_fat_test_core.c \
	tests/mb_test_helpers.c \
	tests/mb_test_setexc.c \
	tests/mb_test_gettime.c \
	tests/mb_test_drive_range.c \
	tests/mb_test_drive_path.c \
	tests/mb_test_bconmap.c \
	tests/mb_test_bios_bdos.c \
	tests/mb_test_vbclock.c \
	tests/mb_test_kernel_loader.c \
	tests/mb_tests_main.c \
	portable/bios/dispatch.c \
	portable/bios/bconstat.c \
	portable/bios/bconin.c \
	portable/bios/bconout.c \
	portable/bios/rwabs.c \
	portable/bios/setexc.c \
	portable/bios/getbpb.c \
	portable/bios/bcostat.c \
	portable/bios/drvmap.c \
	portable/bios/kbshift.c \
	portable/xbios/dispatch.c \
	portable/xbios/initmous.c \
	portable/xbios/getrez.c \
	portable/xbios/iorec.c \
	portable/xbios/rsconf.c \
	portable/xbios/keytbl.c \
	portable/xbios/cursconf.c \
	portable/xbios/settime.c \
	portable/xbios/gettime.c \
	portable/xbios/bioskeys.c \
	portable/xbios/offgibit.c \
	portable/xbios/ongibit.c \
	portable/xbios/dosound.c \
	portable/xbios/kbdvbase.c \
	portable/xbios/vsync.c \
	portable/xbios/supexec.c \
	portable/xbios/bconmap.c \
	portable/xbios/vsetscreen.c \
	portable/xbios/kbrate.c \
	portable/bdos/state.c \
	portable/bdos/dispatch.c \
	portable/bdos/fsetdta.c \
	portable/bdos/fgetdta.c \
	portable/bdos/dfree.c \
	portable/bdos/dsetpath.c \
	portable/bdos/dsetdrv.c \
	portable/bdos/dgetdrv.c \
	portable/bdos/dgetpath.c \
	portable/bdos/pterm0.c \
	portable/bdos/cconin.c \
	portable/bdos/cconws.c \
	portable/bdos/mxalloc.c \
	portable/bdos/fcreate.c \
	portable/bdos/fopen.c \
	portable/bdos/fclose.c \
	portable/bdos/fread.c \
	portable/bdos/fwrite.c \
	portable/bdos/fdelete.c \
	portable/bdos/fseek.c \
	portable/bdos/flock.c \
	portable/bdos/fcntl.c \
	portable/bdos/mshrink.c \
	board/mb_board.c
SOBJS = portable/mb_vectors.S
endif

MINTBOOT_CROSSPREFIX ?= m68k-atari-mintelf-

ifeq ($(mintboot),virt)
TARGET = ../mintboot-virt.elf
CPU = 040
BUILD_ELF = yes
COBJS = \
	portable/mb_portable.c \
	portable/mb_cookie.c \
	portable/mb_traps.c \
	portable/mb_log.c \
	portable/mb_coverage.c \
	portable/fs_fat/mb_fat_core.c \
	portable/fs_fat/mb_fat_dir.c \
	portable/fs_fat/mb_fat_file.c \
	portable/fs_fat/mb_fat_check.c \
	portable/mb_kernel.c \
	portable/mb_lib.c \
	portable/mb_util.c \
	tests/fs_fat/mb_fat_tests.c \
	tests/fs_fat/mb_fat_test_support.c \
	tests/fs_fat/mb_fat_test_lookup.c \
	tests/fs_fat/mb_fat_test_rename.c \
	tests/fs_fat/mb_fat_test_dir.c \
	tests/fs_fat/mb_fat_test_core.c \
	tests/mb_test_helpers.c \
	tests/mb_test_setexc.c \
	tests/mb_test_gettime.c \
	tests/mb_test_drive_range.c \
	tests/mb_test_drive_path.c \
	tests/mb_test_bconmap.c \
	tests/mb_test_bios_bdos.c \
	tests/mb_test_vbclock.c \
	tests/mb_test_kernel_loader.c \
	tests/mb_tests_main.c \
	portable/bios/dispatch.c \
	portable/bios/bconstat.c \
	portable/bios/bconin.c \
	portable/bios/bconout.c \
	portable/bios/rwabs.c \
	portable/bios/setexc.c \
	portable/bios/getbpb.c \
	portable/bios/bcostat.c \
	portable/bios/drvmap.c \
	portable/bios/kbshift.c \
	portable/xbios/dispatch.c \
	portable/xbios/initmous.c \
	portable/xbios/getrez.c \
	portable/xbios/iorec.c \
	portable/xbios/rsconf.c \
	portable/xbios/keytbl.c \
	portable/xbios/cursconf.c \
	portable/xbios/settime.c \
	portable/xbios/gettime.c \
	portable/xbios/bioskeys.c \
	portable/xbios/offgibit.c \
	portable/xbios/ongibit.c \
	portable/xbios/dosound.c \
	portable/xbios/kbdvbase.c \
	portable/xbios/vsync.c \
	portable/xbios/supexec.c \
	portable/xbios/bconmap.c \
	portable/xbios/vsetscreen.c \
	portable/xbios/kbrate.c \
	portable/bdos/state.c \
	portable/bdos/dispatch.c \
	portable/bdos/fsetdta.c \
	portable/bdos/fgetdta.c \
	portable/bdos/dfree.c \
	portable/bdos/dsetpath.c \
	portable/bdos/dsetdrv.c \
	portable/bdos/dgetdrv.c \
	portable/bdos/dgetpath.c \
	portable/bdos/pterm0.c \
	portable/bdos/cconin.c \
	portable/bdos/cconws.c \
	portable/bdos/mxalloc.c \
	portable/bdos/fcreate.c \
	portable/bdos/fopen.c \
	portable/bdos/fclose.c \
	portable/bdos/fread.c \
	portable/bdos/fwrite.c \
	portable/bdos/fdelete.c \
	portable/bdos/fseek.c \
	portable/bdos/flock.c \
	portable/bdos/fcntl.c \
	portable/bdos/mshrink.c \
	board/virt/mb_board_virt.c \
	board/virt/mb_rom_virt.c
SOBJS = portable/mb_vectors.S board/virt/mb_entry.S
LDSCRIPT = $(srcdir)/board/virt/mb_virt.ld
endif

mintboottargets = generic virt

MINTBOOT_COVERAGE ?= no
ifeq ($(MINTBOOT_COVERAGE),yes)
cflags += -fprofile-arcs -ftest-coverage -fprofile-info-section
cflags += -DMB_ENABLE_COVERAGE=1
MINTBOOT_EXTRA_LIBS += -lgcov
endif
